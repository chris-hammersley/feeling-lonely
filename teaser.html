<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>ways of forgetting teaser</title>
    
    <!-- CSS-->
    <link rel="stylesheet" href="assets/css/teaser.css">
    <!--link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous"-->

    <!-- JS-->
    <!--need jquery 2.0.2 for the slide down function for about block because js3.3.1 breaks it-->
    <script src="assets/js/vendor/jquery-2.0.2.min.js"></script>
    <script src="assets/js/plugins/vissense0.9.0/vissense.js"></script>
    <script src="assets/js/plugins/gsap2.1.2/CSSPlugin.min.js"></script>
    <script src="assets/js/plugins/gsap2.1.2/EasePack.min.js"></script>
    <script src="assets/js/plugins/gsap2.1.2/TweenLite.min.js"></script>
    <script src="assets/js/plugins/jquery.wait.js"></script>
    <script src="assets/js/plugins/iphone-inline-video.min.js"></script>

</head>
<!-- START Original attempt basic HTML-->
<body onLoad="window.scroll(0, 250)">
    <div id="container" class="noselect">
        <div id="title">a feature film by meryl murman
          <span>&nbsp;<p>&nbsp;</p> </span>
        </div>
        <div id="teaser-box" hidden>
        <video id="teaser" preload="meta" src="https://player.vimeo.com/external/339585823.hd.mp4?s=93ed0e09d922bf43ba9b32effee3e7ff313f0708&profile_id=175" webkitallowfullscreen mozallowfullscreen allowfullscreen poster="assets/images/poster.png" onclick="this.paused ? this.play() : this.pause();">
        video not supported
        </video>
        </div>
        <div id="scroll2play"><h2>(Scroll to Watch)</h2></div>
        <div id="game" class="round-button button-game">
            <div class="gamebutton round-button-circle buttonWhite">
                <a onmouseenter="game_audio.play();" class="playgame round-button buttonWhiteText" onclick="fadePage();">Play Game</a>
            </div>
        </div>
        <div id="about-button" class="round-button button-about">
            <div class="aboutbutton round-button-circle buttonBlack">
                <a onmouseenter="about_ding.play();" href="#" onclick="playAbout();" class="clickabout round-button buttonBlackText">About</a>
            </div>
        </div>
        <!-- MOBILE BUTTONS -->
        <div id="about-mobile" class="rectangular-button buttonBlue noselect" hidden>
            <a href="#" class="clickabout">About</a>
        </div>
        <div id="game-mobile" class="rectangular-button buttonBlack noselect" hidden>
            <a href="test.html" class="playgame">Back to Play Game</a>
        </div>
        <!-- END MOBILE BUTTONS-->
        <div id="container-about">
            <div id="about" class="about">
                <p>Seven millennials, running from their lonely, hyper-digitized existence,<br/>
                cross paths while escaping into their imaginations.<br/>
                Their outlandish dance towards self-discovery and interconnection <br/>
                brings them face-to-face with parts of themselves theyâ€™d rather forget.</p>
            </div>
        </div>
        <div id="alert" class="modal" data-toggle="modal" hidden>
            <div id="modal-body" class="modal-body">
                <p>Ryan wants to say <br/>thank you for signing up!</p>
                <button id="ok-button" class="modal-button" onclick="showThankYou();" data-dismiss="modal">&nbsp;&nbsp;&nbsp;&nbsp;OK&nbsp;&nbsp;&nbsp;&nbsp;</button>
            </div>
        </div>
        <div id="thankyou-window" class="overlay dismiss">
            <div class="thanks-background">
            <video id="thanks" src="https://player.vimeo.com/external/369221313.sd.mp4?s=6515ee5b566dbcef1b478460e88c7fc9aa672434&profile_id=164?autoplay=1" type="video/mp4" webkit-playsinline playsinline onclick="this.paused ? this.play() : this.pause();">
              video not supported
            </video>
            <!--button id="ok-close" class="modal-button">&nbsp;&nbsp;&nbsp;&nbsp;OK&nbsp;&nbsp;&nbsp;&nbsp;</button-->
            </div>
        </div>
        <div class="clear"></div>
            <div class="form-group">
                <p><form id="mG61Hd" class="form" action="https://docs.google.com/forms/u/4/d/e/1FAIpQLSeumUxbAatX7ilCfBDrBOY9kyxsaZ5TSRz8cWURJzQ4qv63_Q/formResponse" target="hidden_iframe" onsubmit="submitted=!0" method="POST">
                <sub id="email-symbol" class="bw">@</sub><input name="emailAddress" type="email" id="emailNewsletter" onfocus="this.placeholder=''" onBlur="this.placeholder='ways.of.forgetting@gmail.com'" style="color:grey" placeholder="ways.of.forgetting@gmail.com">
                <button name="fvv" id="email-submit" value="1" type="submit" class="bw" onclick="pauseTeaser();">
                Submit</button>
                <!--button onClick="showAlert();">
                Thank You</button-->
                <a id="facebook" href="https://www.facebook.com/flockdance.nola/" target="_blank" class="bw">Fb</button>
                <a id="instagram" href="https://www.instagram.com/motherflockers/" target="_blank" class="bw">Ig</button>
                <a id="imdb" href="https://www.imdb.com/title/tt7412176/" target="_blank" class="bw">Imbd</button>
                </form><p>
                <iframe name="hidden_iframe" id="hidden_iframe" style="display:none;"></iframe>
            </div>
    </div>
<!-- END Basic HTML-->

 
    <script>
/*        setTimeout(function(){
        document.getElementById("teaser").play();
        }, 10000);
*/

/*        var myVideo = document.getElementById('teaser');

        VisSense.VisMon.Builder(VisSense(myVideo, { fullyvisible: 1.0 }))
        .on('fullyvisible', function(monitor) {
          myVideo.play();
        })
        .on('hidden', function(monitor) {
          myVideo.pause();
          
        })
        .build()
        .start();
*/

        if ( 'orientation' in screen ){
            screen.orientation.addEventListener('change', function(){
                //Let's request fullscreen if user switches device in landscape mode.
                if ( screen.orientation.type.startsWith('landscape') ){
                    requestFullscreenVideo();
                } else if ( document.fullscreenElement ){
                    document.exitFullscreen();
                }
            })
        }

        window.addEventListener('DOMContentLoaded', function(){
            $('body').addClass('fade-in');
        });

        // ----------------------------------------------------------------
        // SHOW/HIDE 'Scroll Down to Play' on SCROLL past 1000
        // ----------------------------------------------------------------
        window.addEventListener( 'scroll', function() {
            if ($(window).scrollTop() > 1000){
                $('#scroll2play').hide();
                $('#teaser').get(0).play();
            }
            else {
                $('#scroll2play').show();
            }
             });

        // --------------------------------------------------------------
        // Function to Setup Opening Background Audio
        // --------------------------------------------------------------
        var opening_audio = new Audio('assets/audio/opening.wav');
        var game_audio = new Audio('assets/audio/play-game.wav');
        var about_open_audio = new Audio('assets/audio/about_open.wav');
        var about_closed_audio = new Audio('assets/audio/about_closed.wav');
        var about_ding = new Audio('assets/audio/about-ding.wav');

        function playOpening() {
            opening_audio.loop = true;
            opening_audio.play();
        }

        function stopOpening() {
            opening_audio.pause();
        }

        var playFirst = true;
        function playAbout() {
          if (playFirst) {
            about_open_audio.play();
          } else {
            about_closed_audio.play();
          }
          playFirst = !playFirst;
        }

        playOpening(); // plays the opening sound over the opening title animation

        $('#teaser').get(0);enableInlineVideo('teaser');
        document.getElementById('teaser').addEventListener('play',stopOpening,false);

        function pauseTeaser(){
            $('#teaser').get(0).pause();
        }

        function fadePage(){
            $('body').removeClass('fade-in');
            window.location.href = "test.html";
            return false;
        }

/*        enableInlineVideo(video, {
            iPad: true
        }); */

        // --------------------------------------------------------------
        // Function to SCALE video on SCROLL
        // --------------------------------------------------------------
        window.addEventListener( 'DOMContentLoaded', function() {
        var box = document.getElementById('teaser-box'),
        docHeight = document.documentElement.offsetHeight;
      
            window.addEventListener( 'scroll', function() {
            // show box when scroll starts - use with hidden
            $('#teaser-box').show();

            // normalize scroll position as percentage
            var scrolled = window.scrollY / ( docHeight - window.innerHeight ),
            transformValue = 'scale('+scrolled+')';          

            box.style.WebkitTransform = transformValue;
            box.style.MozTransform = transformValue;
            box.style.OTransform = transformValue;
            box.style.transform = transformValue;

            }, false);
          
        }, false);

        // --------------------------------------------------------------
        // WHEN TEASER FINISHES - INTRODUCE COLOR TO BUTTONS
        // --------------------------------------------------------------        

        document.getElementById('teaser').addEventListener('ended',changeColors,false);

        function changeColors() {
            event.preventDefault();
            // $('#teaser').get(0).load(); //resets video to start and shows poster image
            $('#teaser-box').hide();
            $('.gamebutton').wait(3000).removeClass('buttonWhite').addClass('buttonPurple');
            $('.aboutbutton').wait(4000).removeClass('buttonBlack').addClass('buttonRed');
            $('.playgame').wait(3000).removeClass('buttonWhiteText').addClass('buttonPurpleText');            
            $('.clickabout').wait(4000).removeClass('buttonBlackText').addClass('buttonRedText');
            $('#email-submit').wait(5000).removeClass('bw').addClass('email');
            $('#email-symbol').wait(5000).removeClass('bw').addClass('email');
            $('#facebook').wait(6000).removeClass('bw').addClass('facebook');
            $('#instagram').wait(6000).removeClass('bw').addClass('instagram'); 
            $('#imdb').wait(6000).removeClass('bw').addClass('imdb');
        }
       
        // --------------------------------------------------------------
        // SLIDE UP TO SHOW ABOUT
        // --------------------------------------------------------------

        // When the DOM is ready, initialize the scripts.
        jQuery(function( $ ){
            var container = $( "#container-about" );
            $( "#about-button, #about-mobile" ).click(
                function( event ){
                    // Prevent the default click button event
                    event.preventDefault();
                    // Toggle the slide based on its current visibility
                    if (container.is( ":visible" )){
                        // Hide - slide up - 1000 = 1 sec
                        container.slideUp( 500 );
                    } else {
                        // Show - slide down
                        container.slideDown( 1500 );
                    }
                }
            );
        });

        // --------------------------------------------------------------
        // SLIDE SIDEWAYS TO SHOW THANK YOU
        // --------------------------------------------------------------

            $('#ok-button').click(function(event) {
              if ($('.overlay').hasClass('dismiss')) {
                $('.overlay').removeClass('dismiss').addClass('selected').show();
              }
            //  event.preventDefault();
            });

            $('#ok-close').click(function(event) {
                $('#thanks').get(0).pause();
              if ($('.overlay').hasClass('selected')) {
                $('.overlay').removeClass('selected').addClass('dismiss');
              }
            //  event.preventDefault();
            });

        // --------------------------------------------------------------
        // SHOW MODAL ALERT
        // --------------------------------------------------------------

            function showAlert() {
                $("#alert").modal("show");
                opening_audio.pause();
            }

        // --------------------------------------------------------------
        // SHOW THANK YOU VIDEO
        // --------------------------------------------------------------

            function showThankYou() {
                opening_audio.pause();
                //GSAP 1.8.0 for Animated Vertical Wipe from Center
                var box1 = $("#thanks");
                clipTween1 = TweenLite.from(box1, 1, {clip:"rect(284px 568px 284px 0px)", paused:true});
                setTimeout(function() {
                clipTween1.play();
                }, 2000)
                setTimeout(function() {
                    $('#thanks').get(0);enableInlineVideo('thanks');
                    $("#thanks").get(0).play();
                }, 2000)               
            //    setTimeout(function() {
                // replace the url in quotes below to where you want to the user to be redirected to - will need to change to live page html
                // replace the 30000 with 1-2 seconds longer than the length of the final thank you video; after this timeout, the email is submitted and page is reloaded
                document.getElementById('thanks').addEventListener('ended',resetPage,false);
            //    window.location = "teaser.html";
            //    }, 60000);
            //    document.getElementById("mG61Hd").reset();       
            }

        function resetPage(){
            window.location = "teaser.html";
            document.getElementById("mG61Hd").reset();
        }

        // --------------------------------------------------------------
        // SUBMIT EMAIL TO GOOGLE FORM
        // --------------------------------------------------------------

            var submitted=false;
                // Script to show dialog and reset form
                document.getElementById("email-submit").addEventListener("click", function(){
                $("#alert").modal("show");
                }, 1000);

    </script>

</body>
        <script src="assets/js/plugins/popper1.14.7/popper.min.js"></script>
        <script src="assets/js/vendor/bootstrap4.3.1/bootstrap.min.js"></script>
</html>